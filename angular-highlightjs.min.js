/*! angular-highlightjs
version: 0.0.1
build date: 2013-08-05
author: Robin Fan
https://github.com/pc035860/angular-highlightjs.git */
angular.module("hljs",[]).controller("HljsCtrl",[function(){var a=this,b=null,c=null,d=null;a.init=function(a){b=a},a.setLanguage=function(b){c=b,d&&a.highlight(d)},a.highlight=function(a){if(b){var e;d=a,e=c?hljs.highlight(c,d,!0):hljs.highlightAuto(d),b.html(e.value)}},a.clear=function(){b&&(d=null,b.text(""))},a.release=function(){b=null}}]).directive("hljs",[function(){return{restrict:"EA",controller:"HljsCtrl",compile:function(a){var b=a[0].innerHTML.replace(/^\r\n|\r|\n/,"");return a.html("<pre><code></code></pre>"),function(a,c,d,e){e.init(c.find("code")),b&&e.highlight(b),a.$on("$destroy",function(){e.release()})}}}}]).directive("language",[function(){return{require:"hljs",restrict:"A",link:function(a,b,c,d){c.$observe("language",function(a){angular.isDefined(a)&&d.setLanguage(a)})}}}]).directive("source",[function(){return{require:"hljs",restrict:"A",link:function(a,b,c,d){a.$watch(c.source,function(a){a?d.highlight(a):d.clear()})}}}]).directive("obj",[function(){return{require:"hljs",restrict:"A",link:function(a,b,c,d){var e=c.obj,f=angular.copy(a[e]),g=JSON.stringify(f,null,4);d.highlight(g),a.$watch(e,function(a){$timeout(function(){if(a){var b=angular.copy(a),c=JSON.stringify(b,null,4);d.highlight(c)}else d.clear()},0)},!0)}}}]).directive("include",["$http","$templateCache","$q",function(a,b,c){return{require:"hljs",restrict:"A",compile:function(d,e){var f=e.include;return function(d,e,g,h){var i=0;d.$watch(f,function(d){var e=++i;if(d&&angular.isString(d)){var f,g;f=b.get(d),f||(g=c.defer(),a.get(d,{cache:b}).success(function(a){e===i&&g.resolve(a)}).error(function(){e===i&&h.clear(),g.resolve()}),f=g.promise),c.when(f).then(function(a){a&&(angular.isArray(a)?a=a[1]:angular.isObject(a)&&(a=a.data),a=a.replace(/^\r\n|\r|\n/,""),h.highlight(a))})}else h.clear()})}}}}]);